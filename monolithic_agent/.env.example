# Environment Configuration for AlgoAgent Monolithic System
# Copy to .env and fill in your values

# ============================================================================
# GEMINI API CONFIGURATION
# ============================================================================

# Single API Key (Simple Setup)
# Use this for basic testing and development
GEMINI_API_KEY=AIzaSyABC123_your_api_key_here

# ============================================================================
# KEY ROTATION & MULTI-KEY SETUP (Advanced)
# ============================================================================

# Enable key rotation system (Redis required)
ENABLE_KEY_ROTATION=false

# Secret Storage Type: env, vault, aws, azure
# env = environment variables (development only)
# vault = HashiCorp Vault
# aws = AWS Secrets Manager
# azure = Azure Key Vault
SECRET_STORE_TYPE=env

# Redis Configuration (for key rotation & rate limiting)
REDIS_URL=redis://localhost:6379/0
REDIS_TIMEOUT=5

# Multiple Gemini Keys (for load distribution with key rotation)
# Format: GEMINI_KEY_{key_id} where key_id matches your keys.json entries
# Example: GEMINI_KEY_flash_01, GEMINI_KEY_flash_02, etc.
#
# Flash Keys (Light workloads)
GEMINI_KEY_flash_01=AIzaSyABC123_your_first_flash_key_here
GEMINI_KEY_flash_02=AIzaSyDEF456_your_second_flash_key_here
GEMINI_KEY_flash_03=AIzaSyGHI789_your_third_flash_key_here
#
# Pro Keys (Heavy workloads)
GEMINI_KEY_pro_01=AIzaSyJKL012_your_first_pro_key_here
GEMINI_KEY_pro_02=AIzaSyMNO345_your_second_pro_key_here

# ============================================================================
# VAULT CONFIGURATION (if SECRET_STORE_TYPE=vault)
# ============================================================================

# VAULT_ADDR=https://vault.example.com
# VAULT_TOKEN=your-vault-token
# VAULT_SECRET_PATH=secret/algoagent

# ============================================================================
# AWS SECRETS MANAGER (if SECRET_STORE_TYPE=aws)
# ============================================================================

# AWS_REGION=us-east-1
# AWS_SECRET_PREFIX=algoagent/
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key

# ============================================================================
# AZURE KEY VAULT (if SECRET_STORE_TYPE=azure)
# ============================================================================

# AZURE_VAULT_URL=https://your-vault.vault.azure.net
# AZURE_CLIENT_ID=your-client-id
# AZURE_CLIENT_SECRET=your-client-secret
# AZURE_TENANT_ID=your-tenant-id

# ============================================================================
# DJANGO CONFIGURATION
# ============================================================================

# Secret key for Django (generate with: python manage.py shell)
# >>> from django.core.management.utils import get_random_secret_key
# >>> get_random_secret_key()
SECRET_KEY=your-django-secret-key-here

# Debug mode (set to False in production)
DEBUG=True

# Allowed hosts for Django
ALLOWED_HOSTS=localhost,127.0.0.1

# Database (SQLite is default, configured in settings.py)
# DATABASE_URL=sqlite:///db.sqlite3

# ============================================================================
# RATE LIMITING & CAPACITY
# ============================================================================

# Default rate limits for users (if using key rotation)
USER_RPM_DEFAULT=10
USER_BURST_DEFAULT=20
USER_TPM_DEFAULT=10000

# Key-specific rate limits (configured in keys.json when using key rotation)
# Example in keys.json:
# {
#   "keys": [
#     {
#       "key_id": "flash_01",
#       "model_name": "gemini-2.5-flash",
#       "provider": "gemini",
#       "rpm": 60,
#       "tpm": 1000000
#     }
#   ]
# }

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file location
LOG_FILE=logs/algoagent.log

# ============================================================================
# STRATEGY CONFIGURATION
# ============================================================================

# Default backtest cash
BACKTEST_CASH=10000

# Default commission rate (0.002 = 0.2%)
BACKTEST_COMMISSION=0.002

# Data source
DATA_SOURCE=yfinance

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable conversation memory
ENABLE_CONVERSATION_MEMORY=true

# Enable strategy validation
ENABLE_STRATEGY_VALIDATION=true

# Enable live trading (be careful!)
ENABLE_LIVE_TRADING=false

# ============================================================================
# NOTES
# ============================================================================

# For Single Key Setup (GEMINI_API_KEY):
# 1. Get a free API key from aistudio.google.com
# 2. Set GEMINI_API_KEY in this file
# 3. Set ENABLE_KEY_ROTATION=false
# 4. Start using the system

# For Multi-Key Setup with Rotation (Advanced):
# 1. Create multiple API keys
# 2. Set ENABLE_KEY_ROTATION=true
# 3. Set SECRET_STORE_TYPE (env for dev, vault/aws/azure for production)
# 4. Add your keys using the format GEMINI_KEY_{key_id}
# 5. Create a keys.json file with key metadata (see keys_example.json)
# 6. Run: python manage.py shell
#    from Backtest.key_rotation import KeyManager
#    manager = KeyManager()
#    # System will auto-rotate keys based on capacity and health
