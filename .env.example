# ==========================================
# AlgoAgent Complete Environment Configuration
# ==========================================
# Copy this file to .env and fill in your values
# This file covers both the monolithic_agent (Django backend) and multi_agent systems

# ==========================================
# 1. CORE AI/LLM CONFIGURATION
# ==========================================

# Gemini API Configuration (Primary LLM)
GEMINI_API_KEY=your_gemini_api_key_here
GOOGLE_API_KEY=your_gemini_api_key_here

# OpenAI Configuration (Optional)
OPENAI_API_KEY=your_openai_api_key_here

# Anthropic/Claude Configuration (Optional)
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# ==========================================
# 2. LLM ROUTER & MULTI-KEY MANAGEMENT
# ==========================================

# Enable multi-key LLM router for load distribution
LLM_MULTI_KEY_ROUTER_ENABLED=true

# Multiple Gemini Flash Keys (for load distribution & fallback)
API_KEY_gemini_flash_01=your_gemini_flash_key_01_here
API_KEY_gemini_flash_02=your_gemini_flash_key_02_here
API_KEY_gemini_flash_03=your_gemini_flash_key_03_here

# Multiple Gemini Pro Keys (for heavy tasks)
API_KEY_gemini_pro_01=your_gemini_pro_key_01_here
API_KEY_gemini_pro_02=your_gemini_pro_key_02_here

# Multiple OpenAI Keys (Optional)
# API_KEY_openai_gpt4_01=sk-proj-your_openai_key_01
# API_KEY_openai_gpt4_02=sk-proj-your_openai_key_02

# Multiple Anthropic Keys (Optional)
# API_KEY_claude_opus_01=sk-ant-your_claude_key_01
# API_KEY_claude_sonnet_01=sk-ant-your_claude_key_02

# ==========================================
# 3. SECRET MANAGEMENT
# ==========================================

# Options: env (use environment variables), vault (HashiCorp), aws (AWS Secrets Manager), azure (Azure Key Vault)
SECRET_STORE_TYPE=env

# ==========================================
# 4. DATABASE CONFIGURATION
# ==========================================

# SQLite Configuration (Development - Default)
DATABASE_ENGINE=django.db.backends.sqlite3
DATABASE_NAME=db.sqlite3

# PostgreSQL Configuration (Production - Optional)
# DATABASE_ENGINE=django.db.backends.postgresql
# DATABASE_NAME=algoagent_db
# DATABASE_USER=postgres
# DATABASE_PASSWORD=your_postgres_password
# DATABASE_HOST=localhost
# DATABASE_PORT=5432

# ==========================================
# 5. REDIS CONFIGURATION
# ==========================================

# Redis Connection (for caching, sessions, and real-time features)
REDIS_URL=redis://localhost:6379/0

# ==========================================
# 6. DJANGO CONFIGURATION
# ==========================================

# Django Settings Module
DJANGO_SETTINGS_MODULE=algoagent_api.settings

# Secret Key (Change for production!)
SECRET_KEY=django-insecure-change-this-in-production-generate-a-new-key

# Debug Mode (NEVER set to True in production)
DEBUG=False

# Allowed Hosts (comma-separated)
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0

# CORS Configuration (Frontend URLs)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://localhost:5173,http://127.0.0.1:5173

# Allow all CORS origins (Development only!)
CORS_ALLOW_ALL_ORIGINS=False

# ==========================================
# 7. JWT AUTHENTICATION
# ==========================================

# JWT Token Lifetimes
JWT_ACCESS_TOKEN_LIFETIME=3600
JWT_REFRESH_TOKEN_LIFETIME=604800

# JWT Algorithm
JWT_ALGORITHM=HS256

# Token Claims
JWT_ISSUER=algoagent-api
JWT_AUDIENCE=algoagent-frontend

# ==========================================
# 8. RATE LIMITING
# ==========================================

# User Rate Limits (requests per minute)
USER_RPM_DEFAULT=10
USER_BURST_DEFAULT=20

# Global Rate Limits
GLOBAL_RPM_MAX=1000
GLOBAL_BURST_MAX=2000

# ==========================================
# 9. LLM RETRY & BACKOFF CONFIGURATION
# ==========================================

# Maximum retry attempts for transient errors
LLM_MAX_RETRIES=3

# Base backoff in milliseconds (exponential)
LLM_BASE_BACKOFF_MS=500

# Request timeout in seconds
LLM_REQUEST_TIMEOUT=30

# ==========================================
# 10. CONVERSATION & SESSION MANAGEMENT
# ==========================================

# Conversation/Session TTL (seconds)
CONVERSATION_TTL_SECONDS=86400

# Maximum conversation history depth
MAX_CONVERSATION_HISTORY=100

# Store conversation memory
STORE_CONVERSATION_MEMORY=True

# ==========================================
# 11. WEBSOCKET CONFIGURATION
# ==========================================

# Channels Layer Backend
CHANNELS_BACKEND=channels.layers.InMemoryChannelLayer

# For production Redis-backed channels:
# CHANNELS_BACKEND=channels_redis.core.RedisChannelLayer

# WebSocket URL for clients
WEBSOCKET_URL=ws://localhost:8000/ws/trading/

# ==========================================
# 12. BACKTEST CONFIGURATION
# ==========================================

# Default backtest parameters
BACKTEST_DEFAULT_INITIAL_CAPITAL=100000
BACKTEST_DEFAULT_COMMISSION=0.001
BACKTEST_DEFAULT_SLIPPAGE=0.0005

# Backtest data directory
BACKTEST_DATA_DIR=./Data

# Enable real-time backtest visualization
BACKTEST_ENABLE_STREAMING=True

# ==========================================
# 13. STRATEGY CONFIGURATION
# ==========================================

# Strategy storage directory
STRATEGY_DIR=./strategies

# Template strategy directory
STRATEGY_TEMPLATE_DIR=./Strategy

# Auto-validate generated strategies
AUTO_VALIDATE_STRATEGIES=True

# Strategy code generation model
STRATEGY_GENERATION_MODEL=gemini-2.5-flash

# ==========================================
# 14. DATA PROVIDER CONFIGURATION
# ==========================================

# Data source configurations
DATA_PROVIDER=yfinance

# Market data cache TTL (seconds)
MARKET_DATA_CACHE_TTL=3600

# Enable data caching
ENABLE_DATA_CACHING=True

# ==========================================
# 15. LOGGING CONFIGURATION
# ==========================================

# Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log file path
LOG_FILE_PATH=./logs/algoagent.log

# Log file size limit (bytes)
LOG_FILE_MAX_SIZE=10485760

# Number of log backups to keep
LOG_FILE_BACKUP_COUNT=5

# ==========================================
# 16. MONITORING & OBSERVABILITY
# ==========================================

# Prometheus metrics
PROMETHEUS_ENABLED=False

# Sentry error tracking (Optional)
# SENTRY_DSN=your_sentry_dsn_here

# ==========================================
# 17. SECURITY & ENCRYPTION
# ==========================================

# Enable HTTPS (for production)
SECURE_SSL_REDIRECT=False

# Encryption key for sensitive data
ENCRYPTION_KEY=your_encryption_key_here_min_32_chars

# ==========================================
# 18. EMAIL CONFIGURATION (Optional)
# ==========================================

# Email backend (console for development)
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend

# ==========================================
# 19. FEATURE FLAGS
# ==========================================

# Feature Flags for experimental/beta features
FEATURE_AI_STRATEGY_GENERATION=True
FEATURE_REAL_TIME_BACKTEST=True
FEATURE_CONVERSATION_MEMORY=True
FEATURE_WEBSOCKET_TRADING=True
FEATURE_PRODUCTION_API=True

# ==========================================
# 20. MULTI-AGENT SYSTEM CONFIGURATION
# ==========================================

# Agent framework settings
AGENT_FRAMEWORK=multi_agent

# Enable agent coordination
AGENT_COORDINATION_ENABLED=True

# Agent worker timeout (seconds)
AGENT_WORKER_TIMEOUT=300

# Max concurrent agents
MAX_CONCURRENT_AGENTS=4

# Workflow persistence
WORKFLOW_PERSISTENCE_ENABLED=True
WORKFLOW_STORAGE_PATH=./workflows

# ==========================================
# 21. DEVELOPMENT SETTINGS
# ==========================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Enable debug toolbar
DEBUG_TOOLBAR_ENABLED=False

# Enable verbose logging
VERBOSE_LOGGING=False

# Reload models on file change
AUTO_RELOAD_MODELS=True

# ==========================================
# 22. PERFORMANCE TUNING
# ==========================================

# Database connection pooling
DATABASE_CONN_MAX_AGE=600

# Cache timeout
CACHE_TIMEOUT=300

# API request batch size
API_BATCH_SIZE=100

# ==========================================
# 23. TRADING CONFIGURATION (OPTIONAL)
# ==========================================

# Trading account type (paper, live)
TRADING_ACCOUNT_TYPE=paper

# Max position size (%)
MAX_POSITION_SIZE=10

# Max daily loss limit (%)
MAX_DAILY_LOSS=5

# ==========================================
# QUICK SETUP NOTES
# ==========================================
# 1. Copy this file to .env in the project root
# 2. Fill in your API keys (at minimum: GEMINI_API_KEY)
# 3. Update database credentials if using PostgreSQL/MySQL
# 4. Configure Redis connection if using caching
# 5. Update CORS_ALLOWED_ORIGINS for your frontend URLs
# 6. For production, change DEBUG to False and update SECRET_KEY
# 7. Run: python manage.py migrate
# 8. Run: python manage.py createsuperuser (if needed)
# 9. Start server: python manage.py runserver
# 10. Access API at http://127.0.0.1:8000/api/